<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Gizlilik ve Takip Politikası</title>
  <link rel="shortcut icon" href="images/favicon.png" type="image/x-icon" />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  <style>
    :root {
      --primary: #4361ee;
      --secondary: #3f37c9;
      --accent: #4895ef;
      --dark: #1b263b;
      --light: #f8f9fa;
      --danger: #f72585;
      --success: #4cc9f0;
      --warning: #f8961e;
      --gray: #6c757d;
      --border-radius: 12px;
      --box-shadow: 0 8px 20px rgba(0,0,0,0.08);
      --transition: all 0.3s ease;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Poppins', sans-serif;
      background: linear-gradient(135deg, #f5f7fa 0%, #e4e8f0 100%);
      color: var(--dark);
      line-height: 1.7;
      -webkit-font-smoothing: antialiased;
    }

    header {
      background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
      color: white;
      padding: 2rem 0;
      text-align: center;
      position: relative;
      overflow: hidden;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }

    header::before {
      content: "";
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiPjxkZWZzPjxwYXR0ZXJuIGlkPSJwYXR0ZXJuIiB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHBhdHRlcm5Vbml0cz0idXNlclNwYWNlT25Vc2UiIHBhdHRlcm5UcmFuc2Zvcm09InJvdGF0ZSg0NSkiPjxyZWN0IHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0icmdiYSgyNTUsMjU1LDI1NSwwLjAzKSIvPjwvcGF0dGVybj48L2RlZnM+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0idXJsKCNwYXR0ZXJuKSIvPjwvc3ZnPg==');
      opacity: 0.6;
    }

    header h1 {
      font-size: 2.5rem;
      font-weight: 700;
      margin-bottom: 0.5rem;
      position: relative;
      z-index: 1;
    }

    header p {
      font-size: 1.1rem;
      opacity: 0.9;
      max-width: 700px;
      margin: 0 auto;
      position: relative;
      z-index: 1;
    }

    .container {
      max-width: 1000px;
      margin: 3rem auto;
      background: white;
      padding: 2.5rem;
      border-radius: var(--border-radius);
      box-shadow: var(--box-shadow);
      position: relative;
      z-index: 1;
    }

    h2 {
      color: var(--primary);
      font-size: 1.8rem;
      margin: 2rem 0 1.5rem;
      padding-bottom: 0.5rem;
      border-bottom: 3px solid var(--accent);
      display: inline-block;
    }

    h3 {
      color: var(--secondary);
      font-size: 1.4rem;
      margin: 2rem 0 1rem;
      display: flex;
      align-items: center;
    }

    h3 i {
      margin-right: 0.8rem;
      color: var(--accent);
    }

    p {
      margin-bottom: 1.2rem;
      color: #555;
    }

    ul {
      margin: 1.5rem 0;
      padding-left: 1.5rem;
    }

    li {
      margin-bottom: 0.8rem;
      position: relative;
      padding-left: 1.5rem;
    }

    li::before {
      content: "•";
      color: var(--accent);
      font-weight: bold;
      position: absolute;
      left: 0;
    }

    .highlight-box {
      background: linear-gradient(135deg, rgba(67, 97, 238, 0.05) 0%, rgba(63, 55, 201, 0.05) 100%);
      border-left: 4px solid var(--accent);
      padding: 1.5rem;
      margin: 1.5rem 0;
      border-radius: 0 var(--border-radius) var(--border-radius) 0;
    }

    .highlight-box p:last-child {
      margin-bottom: 0;
    }

    pre {
      background-color: #1e1e3f;
      color: #e1e1ff;
      padding: 1.5rem;
      overflow-x: auto;
      border-radius: var(--border-radius);
      font-family: 'Fira Code', 'Courier New', monospace;
      font-size: 0.9rem;
      margin: 2rem 0;
      white-space: pre-wrap;
      word-break: break-word;
      box-shadow: 0 4px 12px rgba(0,0,0,0.2);
      position: relative;
    }

    pre::before {
      content: "";
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 30px;
      background: rgba(0,0,0,0.2);
      border-radius: var(--border-radius) var(--border-radius) 0 0;
    }

    pre code {
      display: block;
      position: relative;
      z-index: 1;
    }

    .language-tag {
      position: absolute;
      top: 5px;
      right: 15px;
      color: rgba(255,255,255,0.7);
      font-size: 0.8rem;
      z-index: 2;
    }

    footer {
      text-align: center;
      padding: 2rem;
      background: var(--dark);
      color: rgba(255,255,255,0.8);
      font-size: 0.9rem;
    }

    .back-to-top {
      position: fixed;
      bottom: 2rem;
      right: 2rem;
      width: 50px;
      height: 50px;
      background: var(--primary);
      color: white;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 4px 12px rgba(0,0,0,0.2);
      cursor: pointer;
      opacity: 0;
      visibility: hidden;
      transition: var(--transition);
      z-index: 100;
    }

    .back-to-top.visible {
      opacity: 1;
      visibility: visible;
    }

    .back-to-top:hover {
      background: var(--secondary);
      transform: translateY(-3px);
    }

    .section-nav {
      position: sticky;
      top: 2rem;
      margin-right: 2rem;
      background: white;
      border-radius: var(--border-radius);
      padding: 1.5rem;
      box-shadow: var(--box-shadow);
    }

    .section-nav h4 {
      margin-bottom: 1rem;
      color: var(--primary);
    }

    .section-nav ul {
      list-style: none;
      padding: 0;
      margin: 0;
    }

    .section-nav li {
      margin-bottom: 0.6rem;
      padding: 0;
    }

    .section-nav li::before {
      content: none;
    }

    .section-nav a {
      color: var(--gray);
      text-decoration: none;
      transition: var(--transition);
      display: block;
      padding: 0.3rem 0;
    }

    .section-nav a:hover, .section-nav a.active {
      color: var(--primary);
      padding-left: 0.5rem;
    }

    .content-wrapper {
      display: flex;
    }

    .main-content {
      flex: 1;
    }

    .cookie-banner {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      background: var(--dark);
      color: white;
      padding: 1.5rem;
      display: flex;
      flex-wrap: wrap;
      align-items: center;
      justify-content: space-between;
      z-index: 1000;
      box-shadow: 0 -4px 12px rgba(0,0,0,0.1);
      transform: translateY(100%);
      transition: transform 0.3s ease;
    }

    .cookie-banner.visible {
      transform: translateY(0);
    }

    .cookie-banner p {
      margin: 0 1rem 1rem 0;
      color: rgba(255,255,255,0.8);
      flex: 1;
      min-width: 300px;
    }

    .cookie-banner .actions {
      display: flex;
      gap: 1rem;
    }

    .btn {
      padding: 0.6rem 1.2rem;
      border-radius: 50px;
      font-weight: 500;
      cursor: pointer;
      transition: var(--transition);
      border: none;
      font-size: 0.9rem;
    }

    .btn-primary {
      background: var(--primary);
      color: white;
    }

    .btn-primary:hover {
      background: var(--secondary);
    }

    .btn-outline {
      background: transparent;
      color: white;
      border: 1px solid rgba(255,255,255,0.3);
    }

    .btn-outline:hover {
      background: rgba(255,255,255,0.1);
    }

    @media (max-width: 992px) {
      .content-wrapper {
        flex-direction: column;
      }
      
      .section-nav {
        position: static;
        margin-right: 0;
        margin-bottom: 2rem;
      }
    }

    @media (max-width: 768px) {
      .container {
        padding: 1.5rem;
        margin: 1.5rem;
      }
      
      header h1 {
        font-size: 2rem;
      }
      
      .cookie-banner {
        flex-direction: column;
        text-align: center;
      }
      
      .cookie-banner .actions {
        width: 100%;
        justify-content: center;
      }
      
      .cookie-banner p {
        margin-bottom: 1rem;
        min-width: auto;
      }
    }

    @media (max-width: 576px) {
      .container {
        padding: 1rem;
        margin: 1rem;
      }
      
      h2 {
        font-size: 1.5rem;
      }
      
      h3 {
        font-size: 1.2rem;
      }
      
      .btn {
        padding: 0.5rem 1rem;
      }
    }
  </style>
</head>
<body>

  <header>
    <h1>Gizlilik Politikası</h1>
    <p>Verilerinizin güvenliği bizim için önemlidir. İşte verilerinizi nasıl koruduğumuz ve kullandığımız hakkında detaylı bilgiler.</p>
  </header>

  <div class="container">
    <div class="content-wrapper">
      <nav class="section-nav">
        <h4>İçindekiler</h4>
        <ul>
          <li><a href="#veri-toplama" class="active">Veri Toplama</a></li>
          <li><a href="#veri-kullanimi">Veri Kullanımı</a></li>
          <li><a href="#veri-saklama">Veri Saklama</a></li>
          <li><a href="#veri-paylasimi">Veri Paylaşımı</a></li>
          <li><a href="#kullanici-haklari">Kullanıcı Hakları</a></li>
          <li><a href="#izleme-kodu">İzleme Kodu</a></li>
        </ul>
      </nav>

      <div class="main-content">
        <section id="veri-toplama">
          <h2><i class="fas fa-database"></i> Veri Toplama ve Kullanımı</h2>
          <p>Web sitemiz, kullanıcı deneyimini iyileştirmek ve hizmet kalitemizi artırmak amacıyla belirli verileri toplamaktadır. Topladığımız tüm veriler, yasal düzenlemelere uygun şekilde işlenmektedir.</p>

          <h3><i class="fas fa-list-ul"></i> Toplanan Veriler</h3>
          <ul>
            <li><strong>Tarayıcı bilgileri (User Agent):</strong> Kullandığınız tarayıcı ve işletim sistemi versiyonları</li>
            <li><strong>Ziyaret edilen sayfalar:</strong> Sitemizde hangi sayfaları ziyaret ettiğiniz</li>
            <li><strong>Sayfada geçirilen süre:</strong> Her sayfada ne kadar zaman harcadığınız</li>
            <li><strong>Sayfadan çıkış zamanı:</strong> Sitemizi ne zaman terk ettiğiniz</li>
            <li><strong>IP adresi:</strong> Anonimleştirilmiş şekilde ve güvenlik amacıyla</li>
          </ul>

          <div class="highlight-box">
            <h3><i class="fas fa-shield-alt"></i> Güvenlik Notu</h3>
            <p>Kullanıcıların IP adresleri, olası güvenlik ihlallerinde tespit ve müdahale süreçlerinde kullanılmak üzere önleyici bir güvenlik tedbiri olarak kaydedilmektedir. Güvenlik ihlali durumlarında, ilgili kullanıcılar hakkında yasal işlemler başlatılabilir. Aynı güvenlik önlemleri, sistemimizde yer alan proxy sunucularımız ve arka uç (backend) sunucularımız için de geçerli olup, ilgili veriler bu katmanlarda da kayıt altına alınmakta ve korunmaktadır.</p>
          </div>
        </section>

        <section id="veri-kullanimi">
          <h3><i class="fas fa-chart-line"></i> Verilerin Kullanım Amacı</h3>
          <p>Topladığımız veriler aşağıdaki amaçlarla kullanılmaktadır:</p>
          <ul>
            <li>Web sitemizin performansını analiz etmek ve iyileştirmek</li>
            <li>Kullanıcı deneyimini geliştirmek</li>
            <li>Teknik sorunları tespit etmek ve gidermek</li>
            <li>Güvenlik tehditlerine karşı önlem almak</li>
            <li>Yasal yükümlülükleri yerine getirmek</li>
          </ul>
        </section>

        <section id="veri-saklama">
          <h3><i class="fas fa-clock"></i> Verilerin Saklanma Süresi</h3>
          <p>Toplanan veriler Firebase üzerinden güvenli bir şekilde saklanmakta olup, maksimum <strong>1 yıl</strong> süreyle tutulur. Bu sürenin sonunda anonimleştirilir veya kalıcı olarak silinir.</p>
        </section>

        <section id="veri-paylasimi">
          <h3><i class="fas fa-exchange-alt"></i> Veri Paylaşımı</h3>
          <p>Hiçbir kişisel veri üçüncü taraflarla paylaşılmaz. Tüm işlemler güvenli ve şeffaf şekilde yürütülür. Veriler yalnızca aşağıdaki durumlarda paylaşılabilir:</p>
          <ul>
            <li>Yasal bir zorunluluk olması durumunda</li>
            <li>Kullanıcı güvenliğini sağlamak amacıyla</li>
            <li>Hizmet sağlayıcılarımızla sözleşmeli olarak (veri işleme amaçlı)</li>
          </ul>
        </section>

        <section id="kullanici-haklari">
          <h3><i class="fas fa-user-shield"></i> Kullanıcı Hakları</h3>
          <p>6698 sayılı Kişisel Verilerin Korunması Kanunu (KVKK) kapsamında, kullanıcılar olarak aşağıdaki haklara sahipsiniz:</p>
          <ul>
            <li>Verilerinizin işlenip işlenmediğini öğrenme</li>
            <li>Verilerinize erişme ve düzeltme talep etme</li>
            <li>Verilerinizin silinmesini veya yok edilmesini talep etme</li>
            <li>İşlenen verilerin aktarıldığı üçüncü kişileri bilme</li>
            <li>Otomatik sistemlerle analiz edilmesine itiraz etme</li>
          </ul>
          <p>Bu haklarınızı kullanmak için <a href="mailto:kvkk@ornek.com">kvkk@ornek.com</a> adresinden bizimle iletişime geçebilirsiniz.</p>
        </section>

        <section id="izleme-kodu">
          <h2><i class="fas fa-code"></i> İzleme Kodu</h2>
          <p>Aşağıda, ziyaretçi davranışlarını analiz etmek için kullanılan JavaScript izleme kodu yer almaktadır. Bu kod, kullanıcı onayı alındıktan sonra çalışmaktadır:</p>

          <pre><code class="language-javascript">
let cookieConsent = null;
const startTime = new Date();
const sessionId = Math.random().toString(36).substr(2, 9); // Rastgele ID
let sessionRef = null;

async function getIpAddress() {
  try {
    const response = await fetch('https://api.ipify.org?format=json');
    const data = await response.json();
    return data.ip;
  } catch (error) {
    console.error("IP alınamadı:", error);
    return "Bilinmiyor";
  }
}

// Tam takip fonksiyonu (çerez kabul edildiğinde)
async function startTracking() {
  const ipAddress = await getIpAddress();

  sessionRef = await addDoc(collection(db, "siteSessions"), {
    sessionId: sessionId,
    startTime: serverTimestamp(),
    userAgent: navigator.userAgent,
    page: window.location.pathname,
    ipAddress: ipAddress,
    exited: false,
    consent: true
  });

  window.addEventListener("beforeunload", async () => {
    const endTime = new Date();
    const durationSeconds = Math.floor((endTime - startTime) / 1000);

    try {
      await updateDoc(sessionRef, {
        endTime: serverTimestamp(),
        durationSeconds: durationSeconds,
        exited: true
      });
    } catch (error) {
      console.error("Çıkış verisi güncellenemedi:", error);
    }
  });
}

// Minimal takip fonksiyonu (çerez reddedildiğinde)
async function trackMinimalSession() {
  const ipAddress = await getIpAddress();

  sessionRef = await addDoc(collection(db, "siteSessions"), {
    sessionId: sessionId,
    startTime: serverTimestamp(),
    ipAddress: ipAddress,
    consent: false,
    exited: false
  });

  window.addEventListener("beforeunload", async () => {
    try {
      await updateDoc(sessionRef, {
        endTime: serverTimestamp(),
        exited: true
      });
    } catch (error) {
      console.error("Minimal çıkış verisi güncellenemedi:", error);
    }
  });
}

window.addEventListener('load', () => {
  const storedConsent = localStorage.getItem('cookieConsent');
  console.log("Stored consent:", storedConsent); // DEBUG için

  if (storedConsent == 'true') {
    console.log("Kullanıcı önceden kabul etmiş.");
    cookieConsent = true;
    document.getElementById('cookieBanner').style.display = 'none';
    startTracking();
  } else if (storedConsent == 'false') {
    console.log("Kullanıcı önceden reddetmiş.");
    document.getElementById('cookieBanner').style.display = 'block';
    cookieConsent = null;
  } else {
    console.log("Kullanıcıdan henüz seçim alınmamış.");
    document.getElementById('cookieBanner').style.display = 'block';

    setTimeout(() => {
      if (cookieConsent === null) {
        console.log("Kullanıcı seçim yapmadı, otomatik reddedildi.");
        window.rejectCookies();
      }
    }, 10000);
  }
});

window.acceptCookies = function() {
  if (cookieConsent !== null) return;
  cookieConsent = true;
  localStorage.setItem('cookieConsent', 'true');
  document.getElementById('cookieBanner').style.display = 'none';
  startTracking();
}

window.rejectCookies = function() {
  if (cookieConsent !== null) return;
  cookieConsent = false;
  localStorage.setItem('cookieConsent', 'false');
  document.getElementById('cookieBanner').style.display = 'none';
  console.log("Kullanıcı çerezleri reddetti, sadece IP verisi toplanıyor.");
  trackMinimalSession();
}
          </code></pre>
          <p class="language-tag">JavaScript</p>
        </section>
      </div>
    </div>
  </div>

  <div class="cookie-banner" id="cookieBanner">
    <p>Bu web sitesi, kullanıcı deneyiminizi geliştirmek için çerezler kullanmaktadır. Çerez politikamız hakkında daha fazla bilgi almak için <a href="#" style="color: var(--accent);">Gizlilik Politikamızı</a> inceleyebilirsiniz.</p>
    <div class="actions">
      <button class="btn btn-outline" onclick="window.rejectCookies()">Reddet</button>
      <button class="btn btn-primary" onclick="window.acceptCookies()">Kabul Et</button>
    </div>
  </div>

  <div class="back-to-top" id="backToTop">
    <i class="fas fa-arrow-up"></i>
  </div>

  <footer>
    <p>© 2025 Tüm hakları saklıdır. Bu web sitesi KVKK ve GDPR uyumludur.</p>
  </footer>

  <script>
    // Back to top butonu
    const backToTop = document.getElementById('backToTop');
    
    window.addEventListener('scroll', () => {
      if (window.pageYOffset > 300) {
        backToTop.classList.add('visible');
      } else {
        backToTop.classList.remove('visible');
      }
    });
    
    backToTop.addEventListener('click', () => {
      window.scrollTo({
        top: 0,
        behavior: 'smooth'
      });
    });

    // Bölüm navigasyonu
    const sections = document.querySelectorAll('section');
    const navLinks = document.querySelectorAll('.section-nav a');
    
    window.addEventListener('scroll', () => {
      let current = '';
      
      sections.forEach(section => {
        const sectionTop = section.offsetTop;
        const sectionHeight = section.clientHeight;
        
        if (pageYOffset >= sectionTop - 200) {
          current = section.getAttribute('id');
        }
      });
      
      navLinks.forEach(link => {
        link.classList.remove('active');
        if (link.getAttribute('href') === `#${current}`) {
          link.classList.add('active');
        }
      });
    });

    // Çerez banner'ını göster
    document.addEventListener('DOMContentLoaded', () => {
      const cookieBanner = document.getElementById('cookieBanner');
      const storedConsent = localStorage.getItem('cookieConsent');
      
      if (storedConsent === null) {
        setTimeout(() => {
          cookieBanner.classList.add('visible');
        }, 1000);
      }
    });
  </script>
</body>
</html>